# AuthServiceProvider

**AuthServiceProvider** is a backend microservice responsible for authenticating users and issuing JWT tokens in the Ventixe platform. It serves as the authentication gateway for all other services in the distributed architecture, integrating with external user services and using secure token issuance based on claims and roles.

---

## Overview

This service exposes a secure API that handles user sign-in and sign-out functionality. Upon successful login, it issues a signed JWT token that contains user identity and roles, enabling role-based access control (RBAC) across microservices.

---

## Features

- Authenticate users via email/password credentials
- Issue signed JWT tokens containing user ID, email, and roles
- Stateless logout endpoint
- Integration with external account/user service
- All configuration secrets (e.g. JWT signing key) can be securely loaded from **Azure Key Vault**

---

## Technology Stack

- **ASP.NET Core 9**  
- **JWT Authentication** (`System.IdentityModel.Tokens.Jwt`)  
- **HttpClient** for calling external services  
- **Azure Key Vault** (optional, for secrets)  
- **Swagger / OpenAPI**  

---

## JWT Token Structure

JWTs generated by the service include the following claims:

| Claim Type           | Description                    |
|----------------------|--------------------------------|
| `sub`                | User ID (subject)              |
| `nameidentifier`     | User ID                        |
| `email`              | User email                     |
| `role`               | One or more user roles         |

Tokens are signed using a symmetric key stored as `Jwt:Secret`.

---

## Azure Key Vault Integration

To securely manage sensitive values, store the following secrets in **Azure Key Vault**:

| Key            | Purpose                              |
|----------------|---------------------------------------|
| `Jwt:Secret`   | Symmetric key used for signing tokens |
| `Jwt:Issuer`   | JWT issuer string                     |
| `Jwt:Audience` | Expected JWT audience                 |
| `AccountService:BaseUrl` | URL to external AccountService |

